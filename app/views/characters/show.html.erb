<article class="character">
  <header>
    <h1 class="title">
      <%= @character.name %>
    </h1>
  </header>
  <%= form_with model: @character, builder: CharacterFormBuilder do |f| %>
    <fieldset id="race-profession">
      <legend>
        <%= t ".race_and_profession" %>
      </legend>
      <%= f.text_field :race, value: f.object.race.model_name.human, readonly: true %>
      <%= f.text_field :profession, readonly: true, value: "Fighter" %><%# FIXME: slime! %>
      <%= f.text_field :realm_of_power, readonly: true %>
      <%= f.text_field :level, readonly: true %>
      <%= f.text_field :experience_points, readonly: true %>
    </fieldset>
    <fieldset id="appearance">
      <legend>
        <%= t ".appearance" %>
      </legend>
      <%= f.text_field :height, value: "1,78 m" %><%# FIXME: slime! %>
      <%= f.text_field :weight, value: "77 kg" %><%# FIXME: slime! %>
      <%= f.text_field :eyes_color %>
      <%= f.text_field :hair_color %>
      <%= f.text_field :age %>
      <%= f.text_field :gender, value: Character.human_attribute_name("genders.#{f.object.gender}") %>
    </fieldset>
    <fieldset id="portrait">
      <legend>
        <%= t ".portrait" %>
      </legend>
    </fieldset>
    <fieldset id="hits">
      <%= f.tracker_field :hit_points, value: "65" %><%# FIXME: slime! %>
    </fieldset>
    <fieldset id="power-points">
      <%= f.tracker_field :power_points, value: "3" %><%# FIXME: slime! %>
    </fieldset>
    <fieldset id="stats">
      <legend>
        <%= t ".stats" %>
      </legend>
      <%= render @character.constitution %>
      <%= render @character.agility %>
      <%= render @character.self_discipline %>
      <%= render @character.memory %>
      <%= render @character.reasoning %>
      <%= render @character.strength %>
      <%= render @character.quickness %>
      <%= render @character.presence %>
      <%= render @character.empathy %>
      <%= render @character.intuition %>
    </fieldset>
    <fieldset id="movement">
      <legend>
        <%= t ".movement" %>
      </legend>
      <%= f.text_field :base_movement_rate, readonly: true %>
      <%= f.text_field :maximum_pace, readonly: true %>
    </fieldset>
    <fieldset id="db">
      <legend>
        <%= t ".defensive_bonus" %>
      </legend>
      <%= render @character.db, form: f %>
    </fieldset>
    <fieldset id="armor">
      <%# FIXME: this whole section is slimed! %>
      <legend>
        <%= t ".armor" %>
      </legend>
      <%= f.text_field :armor_type, readonly: true, value: "TA17" %>
    </fieldset>
    <fieldset id="shield">
      <%# FIXME: this whole section is slimed! %>
      <legend>
        <%= t ".shield" %>
      </legend>
      <label class="bonus">
        <span><%= t ".bonus_vs_melee" %></span>
        <input type="text" value="+20">
      </label>
      <label class="bonus">
        <span><%= t ".bonus_vs_projectiles" %></span>
        <input type="text" value="+20">
      </label>
    </fieldset>
    <fieldset id="health">
      <legend>
        <%= t ".health" %>
      </legend>
      <%= f.text_field :soul_departure, readonly: true %>
      <%= f.text_field :stat_deterioration, readonly: true %>
      <%= f.text_field :recovery_multiplier, readonly: true %>
      <%= f.text_field :type_of_hit_dice, readonly: true %>
      <%= f.text_field :maximum_base_hit_point_total, readonly: true %>
    </fieldset>
    <fieldset id="resistance-rolls">
      <legend>
        <%= t ".resistance_rolls" %>
      </legend>
      <%= render @character.rr_bonus_against_poison, name: t(".rr_against_poison"), form: f %>
      <%= render @character.rr_bonus_against_disease, name: t(".rr_against_disease"), form: f %>
      <%= render @character.rr_bonus_against_mentalism, name: t(".rr_against_mentalism"), form: f %>
      <%= render @character.rr_bonus_against_essence, name: t(".rr_against_essence"), form: f %>
      <%= render @character.rr_bonus_against_channeling, name: t(".rr_against_channeling"), form: f %>
    </fieldset>
    <fieldset id="skills">
      <legend>
        <%= t ".skills" %>
      </legend>
      <section class="skills-category">
        <%= render "skill_stub", skill: OpenStruct.new(name: "Soft leather", special?: true) %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Hard leather", special?: true) %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Chain", special?: true) %>
        <%= render @character.skills.plate, name: "Plate", form: f %>
      </section>
      <section class="skills-category">
        <%= render @character.weapon_skills, form: f %>
        <%#= render "skill_form" %>
      </section>
      <section class="skills-category">
        <%= render "skill_stub", skill: OpenStruct.new(name: "Climbing") %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Swimming") %>
        <%= render "skill_form" %>
      </section>
      <section class="skills-category">
        <%= render "skill_stub", skill: OpenStruct.new(name: "Disarm traps") %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Pick locks") %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Ambush", special?: true) %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Stalk & Hide") %>
        <%= render @character.skills.perception, name: "Perception", form: f %>
      </section>
      <section class="skills-category">
        <%= render "skill_stub", skill: OpenStruct.new(name: "Staves & Wands") %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Runes") %>
        <%= render "skill_stub", skill: OpenStruct.new(name: "Channeling") %>
        <%= render "skill_form" %>
      </section>
      <section class="skills-category">
        <%= render "skill_stub", skill: OpenStruct.new(name: "Adrenal defense") %>
        <%= render "skill_form" %>
      </section>
      <section class="skills-category">
        <%= render "skill_stub", skill: OpenStruct.new(name: "Body development", special?: true) %>
      </section>
    </fieldset>
    <fieldset id="skill-areas">
      <legend>
        <%= t ".skill_areas" %>
      </legend>
      <%= fields_for @character.skill_development_costs do |g| %>
        <section class="skills-category">
          <%= render "skill_area", area: :bows, form: g %>
          <%= render "skill_area", area: :one_handed_crushing, form: g %>
          <%= render "skill_area", area: :one_handed_edged, form: g %>
          <%= render "skill_area", area: :pole_arms, form: g %>
          <%= render "skill_area", area: :thrown, form: g %>
          <%= render "skill_area", area: :two_handed, form: g %>
        </section>
        <section class="skills-category">
          <%= render "skill_area", area: :riding, form: g %>
        </section>
        <section class="skills-category">
          <%= render "skill_area", area: :directed_spells, form: g %>
          <%= render "skill_area", area: :spell_lists, form: g %>
        </section>
        <section class="skills-category">
          <%= render "skill_area", area: :adrenal_moves, form: g %>
          <%= render "skill_area", area: :martial_arts, form: g %>
        </section>
      <% end %>
    </fieldset>
    <fieldset id="languages">
      <legend>
        <%= t ".languages" %>
      </legend>
      <section class="language">
        <h1>Common</h1>
        <label class="bonus">
          <span>Spoken</span>
          <input type="text" value="6" readonly="readonly">
        </label>
        <label class="bonus">
          <span>Written</span>
          <input type="text" value="6" readonly="readonly">
        </label>
      </section>
      <section class="language">
        <h1>Human</h1>
        <label class="bonus">
          <span>Spoken</span>
          <input type="text" value="7" readonly="readonly">
        </label>
        <label class="bonus">
          <span>Written</span>
          <input type="text" value="6" readonly="readonly">
        </label>
      </section>
    </fieldset>
  <% end %>
</article>
